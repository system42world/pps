<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link type="application/atom+xml" rel="alternate" href="/feed/release.xml" title="Jekyll releases posts" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="https://github.com/4insyde/commits/master.atom">
  <link rel="preload" href="/fonts/lato-v14-latin-300.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/fonts/lato-v14-latin-700.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="/css/main.css" as="style">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>
<body class="wrap"><header>
  <div class="flexbox">
    <div class="center-on-mobiles">
      <h1>
        <a href="/" class="logo">
          <span class="sr-only">Jekyll</span>
          <img src="/assets/square2.png" width="96" height="96" alt="Company Logo">
        </a>
      </h1>
    </div>
    <nav class="main-nav hide-on-mobiles">
      <ul>
  <li><a href="/">Home</a></li>
  <li><a href="/docs/intro/">Docs</a></li>
  <li><a href="/news/">News</a></li>
  </ul>
</nav>
    <div class="search hide-on-mobiles">
    </div>
    <div class="meta hide-on-mobiles">
      <ul>
        <li><a href="https://github.com/4insyde/releases/tag/v0.3.0">v0.3.0</a></li>
        <li><a href="https://github.com/4insyde">GitHub</a></li>
      </ul>
    </div>
  </div>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li><a href="/">Home</a></li>
    <li><a href="/docs/intro/">Docs</a></li>
    <li><a href="/news/">News</a></li>
    <li><a href="https://github.com/4insyde">GitHub</a></li>
</ul>
</nav>
</header>
<section class="docs">
  <div class="grid">
    <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docs…</option>
    <optgroup label="Getting Started">
      <option value="/docs/intro/">Concept</option>
      <option value="/docs/glossary/">Glossary</option>
    </optgroup>
    <optgroup label="Architecture">
      <option value="/docs/architecture/">Architecture</option>
      <option value="/docs/payment-processing/">Payment Processing</option>
      <option value="/docs/access-and-databases/">Accesses and Databases</option>
      <option value="/docs/deployment/">Deployment: Kubernetes</option>
    </optgroup>
    <optgroup label="Administration">
      <option value="/docs/transaction-processing/">Using Transactions Proccessing</option>
      <option value="/docs/integrations/">Integrations Strategies</option>
    </optgroup>
    <optgroup label="Guides">
    </optgroup>
    </select>
</div>
<div class="unit four-fifths">
      <article>
        <div class="improve right hide-on-mobiles">
          <a data-proofer-ignore href="/docs/_docs/payment-processing.adoc | relative_url"><i
             class="fa fa-pencil"></i> &nbsp;Improve this page</a>
        </div>
        <h1>Payment Processing</h1>
        <div class="paragraph">
<p>The processing of payment transactions consists of a few phases.</p>
</div>
<div class="sect1">
<h2 id="transaction_initiation">Transaction initiation</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/assets/docs/Transaction-Initiation-Sequence.png" alt="Transaction Initiation Sequence">
</div>
</div>
<div class="paragraph">
<p>PPS client (Bank Backend in this example) creates new transactions asynchronously. When PPS create a transaction, the PPS client receives a corresponding event.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transaction_execution_if_flow_is_not_found">Transaction execution if flow is not found</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/assets/docs/Transaction-Processing-No-flow-Sequence.png" alt="Transaction Processing No flow Sequence">
</div>
</div>
<div class="paragraph">
<p>During this phase, the engine orchestrates transaction execution according to its flow. Every flow has criteria for transactions it can be used with. If there is no appropriate flow for the given transaction, PPS rejects it with the reason "Flow not found".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transaction_execution_if_flow_is_found">Transaction execution if flow is found</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/assets/docs/Transaction-Processing-Flow-exists-Sequence.png" alt="Transaction Processing Flow exists Sequence">
</div>
</div>
<div class="paragraph">
<p>The flow consists of sequential flow steps. A flow step has:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>user-defined id</p>
</li>
<li>
<p>the name of the step function</p>
</li>
<li>
<p>schema of the step function command</p>
</li>
<li>
<p>step function timeout (optional)</p>
</li>
<li>
<p>the name of the compensating step function (optional)</p>
</li>
<li>
<p>schema of the compensating step function command (optional)</p>
</li>
<li>
<p>compensating step function timeout (optional)</p>
</li>
<li>
<p>retry attempts limit (optional)</p>
</li>
<li>
<p>transaction status to set if the step was completed successfully (optional)</p>
</li>
<li>
<p>transaction status to set if the step was completed with an error (optional)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It’s required for a step to complete successfully so that the engine can invoke the next one. Otherwise, the engine retries the failing step until the retry attempts limit is exhausted. If the step is still failing, the engine invokes compensating step functions of the failing step and successfully completed steps in reverse order.</p>
</div>
<div class="paragraph">
<p>Having such comprehensive flow steps, you can quickly build a transaction-centric DAG that takes care of transaction processing, step retry attempts, transaction compensation, and status changes.</p>
</div>
</div>
</div>
<h1 id="extention_registration" class="sect0">Extention Registration</h1>
<div class="imageblock">
<div class="content">
<img src="/assets/docs/Extension-Registration-Sequence.png" alt="Extension Registration Sequence">
</div>
</div>
<div class="paragraph">
<p>Extensions implement step functions. A single flow can use step functions implemented by multiple extensions. When starting up, the extension registers itself in the Extension Manager. It announces a list of implemented step functions. The latter Extension Manager uses to proxy step function requests to the extension that implements the target function. Extension Manager is the engine’s entry point to call step functions. Since no static information describes available functions and their endpoints, extensions can register and deregister themselves dynamically without the engine’s downtime or reconfiguration.</p>
</div>
<div class="sect1">
<h2 id="quering_transactions">Quering Transactions</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/assets/docs/Querying-Transactions-Sequence.png" alt="Querying Transactions Sequence">
</div>
</div>
<div class="paragraph">
<p>The engine provides API to query ongoing and past transactions, their status, error codes, and so on. The “read” API implements the <strong>Transactions</strong> service. Transaction Processor publishes transaction progress-related events that Transactions service reads to build a queryable state of particular payment transactions.</p>
</div>
</div>
</div>
      </article>
    </div>
    <div class="unit one-fifth hide-on-mobiles">
  <aside>
    <h4>Getting Started</h4>
      <ul>
        <li><a href="/docs/intro/">Concept</a></li>
        <li><a href="/docs/glossary/">Glossary</a></li>
      </ul>
    <h4>Architecture</h4>
      <ul>
        <li><a href="/docs/architecture/">Architecture</a></li>
        <li class="current"><a href="/docs/payment-processing/">Payment Processing</a></li>
        <li><a href="/docs/access-and-databases/">Accesses and Databases</a></li>
        <li><a href="/docs/deployment/">Deployment: Kubernetes</a></li>
      </ul>
    <h4>Administration</h4>
      <ul>
        <li><a href="/docs/transaction-processing/">Using Transactions Proccessing</a></li>
        <li><a href="/docs/integrations/">Integrations Strategies</a></li>
      </ul>
    <h4>Guides</h4>
      <ul>
      </ul>
    </aside>
</div>
<div class="clear"></div>
  </div>
</section>
<footer>
      <p>
        <hr />
          <p style="text-align: center; margin-bottom: 10px">
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">
          <img alt="Creative Commons License" style="border-width:0;width:auto" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png"/>
          </a><br />
              <small>
              Except where otherwise noted, content on this site is licensed under a 
              <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">
                  Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License
              </small>
          </a>.
          <br />
          <small> Created by <a href="https://www.insyde.group">INSYDE, SDG</small></a>
          </p>
      </p>
</footer>
</body>
</html>
